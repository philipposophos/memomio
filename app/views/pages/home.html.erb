<div class="container">
  <!-- Header section -->
  <div class="header">
    <h1></h1>
    <!-- CSS "rippled" background -->
    <div class="header-create-memory">
      <%= link_to new_memory_path, class: "btn sun-btn" do %>
        <%# <i class="fa-solid fa-plus" style="font-size: 50px; text-shadow: 0 1px 4px white;"></i> %>
      <% end %>
    </div>
    <h3>EXPLORE YOUR BIOGRAPHY</h3>
  </div>

    <!-- Timeline section -->
  <section class="cd-timeline js-cd-timeline">
    <% memories = Memory.where(user: current_user) %>
    <% if memories.length < 16 %>
      <% memos = memories.sort_by(&:date).reverse() %>
    <% else %>
      <% key_memos = memories.where(key_memory: true) %>
      <% if key_memos.length < 15 %>
        <% x = 15 - key_memos.length %>
        <% non_key = memories.where(key_memory: false).sort_by(&:date).reverse().first(x) %>
        <% memos = (key_memos + non_key).sort_by(&:date).reverse() %>
      <% end %>
    <% end %>
      <div class="container max-width-lg cd-timeline__container">
        <% memos.each do |memory| %>
          <%= link_to memory_path(memory), style: "text-decoration: none;" do %>
            <div class="cd-timeline__block">
              <div class="cd-timeline__img cd-timeline__img--picture">
                <% if memory.photo.attached? %>
                  <%= cl_image_tag memory.photo.key, height: 300, width: 400, crop: :fill %>
                <% end %>
              </div> <!-- cd-timeline__img -->

              <div class="cd-timeline__content text-component" style="text-align: center;">
                <h2><%= memory.title %></h2>
                <p class="date"><%= memory.date.strftime("%B %d, %Y") %></p>
                <p> <%= truncate(memory.description, :length => 60, :separator => ' ') %> </p>
              </div> <!-- cd-timeline__content -->
            </div> <!-- cd-timeline__block -->
          <% end %>
        <% end %>
      </div>
  </section> <!-- cd-timeline -->
</div>


<%# Background animation %>
<%= render "shared/bg_animation", animate: true, show_sun: false %>
